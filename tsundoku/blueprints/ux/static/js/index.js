(()=>{"use strict";var __webpack_modules__={16:(e,o,t)=>{t.d(o,{Z:()=>d});var n=t(645),a=t.n(n)()((function(e){return e[1]}));a.push([e.id,".is-scrollable{overflow-y:auto}.dashboard{display:flex;flex-direction:row}.dashboard.is-full-height{height:100vh}.dashboard-panel{display:flex;flex-direction:column;padding:2rem 1.5rem;flex:0 0 25rem;height:100%}.dashboard-panel.left{flex:0 0 25rem}.dashboard-panel.right{flex:0 0 25rem}.dashboard-panel.has-thick-padding{padding:3rem 2rem}.dashboard-panel.is-one-quarter{flex:0 0 25%}.dashboard-panel.is-half{flex:0 0 50%}.dashboard-panel.is-one-third{flex:0 0 33.3333333333%}.dashboard-panel.is-small{flex:0 0 15rem}.dashboard-panel.is-medium{flex:0 0 20rem}.dashboard-panel.is-large{flex:0 0 30rem}.dashboard-panel-header.is-centered,.dashboard-panel-content.is-centered,.dashboard-panel-footer.is-centered{display:flex;justify-content:center}.dashboard-panel-header{margin-bottom:2rem}.dashboard-panel-main{flex:1}.dashboard-panel-footer{margin-top:2rem}.dashboard-main{display:flex;flex:1;display:flex;flex-direction:column;min-height:100vh}.dashboard-main .navbar.is-fixed-top{position:-webkit-sticky;position:sticky;top:0}.dashboard-main .footer{flex:1}\n",""]);const d=a},645:e=>{e.exports=function(e){var o=[];return o.toString=function(){return this.map((function(o){var t=e(o);return o[2]?"@media ".concat(o[2]," {").concat(t,"}"):t})).join("")},o.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var d=0;d<this.length;d++){var s=this[d][0];null!=s&&(a[s]=!0)}for(var i=0;i<e.length;i++){var r=[].concat(e[i]);n&&a[r[0]]||(t&&(r[2]?r[2]="".concat(t," and ").concat(r[2]):r[2]=t),o.push(r))}},o}},312:(e,o,t)=>{t.r(o),t.d(o,{default:()=>s});var n=t(379),a=t.n(n),d=t(16);a()(d.Z,{insert:"head",singleton:!1});const s=d.Z.locals||{}},379:(e,o,t)=>{var n,a=function(){var e={};return function(o){if(void 0===e[o]){var t=document.querySelector(o);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[o]=t}return e[o]}}(),d=[];function s(e){for(var o=-1,t=0;t<d.length;t++)if(d[t].identifier===e){o=t;break}return o}function i(e,o){for(var t={},n=[],a=0;a<e.length;a++){var i=e[a],r=o.base?i[0]+o.base:i[0],l=t[r]||0,c="".concat(r," ").concat(l);t[r]=l+1;var h=s(c),u={css:i[1],media:i[2],sourceMap:i[3]};-1!==h?(d[h].references++,d[h].updater(u)):d.push({identifier:c,updater:m(u,o),references:1}),n.push(c)}return n}function r(e){var o=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var d=t.nc;d&&(n.nonce=d)}if(Object.keys(n).forEach((function(e){o.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(o);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(o)}return o}var l,c=(l=[],function(e,o){return l[e]=o,l.filter(Boolean).join("\n")});function h(e,o,t,n){var a=t?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(o,a);else{var d=document.createTextNode(a),s=e.childNodes;s[o]&&e.removeChild(s[o]),s.length?e.insertBefore(d,s[o]):e.appendChild(d)}}function u(e,o,t){var n=t.css,a=t.media,d=t.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),d&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(d))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,f=0;function m(e,o){var t,n,a;if(o.singleton){var d=f++;t=p||(p=r(o)),n=h.bind(null,t,d,!1),a=h.bind(null,t,d,!0)}else t=r(o),n=u.bind(null,t,o),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return n(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;n(e=o)}else a()}}e.exports=function(e,o){(o=o||{}).singleton||"boolean"==typeof o.singleton||(o.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var t=i(e=e||[],o);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<t.length;n++){var a=s(t[n]);d[a].references--}for(var r=i(e,o),l=0;l<t.length;l++){var c=s(t[l]);0===d[c].references&&(d[c].updater(),d.splice(c,1))}t=r}}}},561:(__unused_webpack_module,exports,__webpack_require__)=>{var __webpack_unused_export__;__webpack_unused_export__={value:!0},__webpack_require__(312);var entriesToDelete=[],entriesToAdd=[],all_triggers=["downloading","downloaded","renamed","moved","completed"],modalsCanBeClosed=!0;function showAddorEditProgressBars(){modalsCanBeClosed=!1,$(".closes-modals").addClass("is-hidden"),$(".submits-modals").addClass("is-hidden"),$("progress").removeClass("is-hidden")}function hideAddorEditProgressBars(){modalsCanBeClosed=!0,$(".closes-modals").removeClass("is-hidden"),$(".submits-modals").removeClass("is-hidden"),$("progress").addClass("is-hidden")}function updateTsundoku(){modalsCanBeClosed=!1,$("#updating-pg-bar").removeClass("is-hidden"),$("#update-button").addClass("is-hidden"),$("#close-update-modal-button").addClass("is-hidden"),$.ajax({url:"/update",type:"POST"}),setTimeout((function e(){setTimeout((function(){$.ajax({url:"/",type:"GET",success:function(){location.reload()},statusCode:{302:function(e){location.reload()}},complete:function(){e()},timeout:1e3})}),1e3)}),5e3)}function submitAddOrEditShowForm(e){showAddorEditProgressBars(),e.preventDefault();let o=$(this).closest("form").attr("action"),t=$(this).closest("form").attr("method"),n=$(this).closest("form").serialize();updateWebhooks();for(const e of entriesToDelete)deleteShowEntry(e[0],e[1]);for(const e of entriesToAdd)addShowEntry(e[0],e[1],e[2]);$.ajax({url:o,type:t,data:n,success:function(e){location.reload()},error:function(e,o,t){hideAddorEditProgressBars(),alert("There was an error processing the request.")}})}function updateWebhooks(){document.getElementById("show-webhook-table")&&$("#show-webhook-table tbody tr").each((function(){let e=$(this).data("webhook"),o=$(this).data("show"),t=[];$(this).find("input").each((function(){$(this).prop("checked")&&t.push($(this).attr("name"))}));let n=`/api/v1/shows/${o}/webhooks/${e}`,a={triggers:t.join()};$.ajax({url:n,type:"PUT",data:a,error:function(e,o,t){console.error(`${o}: ${t}`)}})}))}function bufferShowEntryAddition(e){e.preventDefault();let o=$(this).closest("form")[0],t=new FormData(o),n=parseInt(t.get("show_id")),a=parseInt(t.get("episode")),d=t.get("magnet"),s=document.querySelector("#show-entry-table tbody"),i=[];for(const e of Array.from(s.rows)){let o=e.cells[0],t=parseInt(o.innerHTML);i.push(t)}for(const e of entriesToAdd)i.push(e[1]);if(i.includes(a))return $("#add-show-entry-form input[name='episode']").addClass("is-danger").effect("shake",{distance:5,times:2},400),void $("#add-show-entry-form p").removeClass("is-hidden");$("#add-show-entry-form input[name='episode']").removeClass("is-danger"),$("#add-show-entry-form p").addClass("is-hidden"),entriesToAdd.push([n,a,d]),addRowToShowEntryTable({id:0,show_id:n,current_state:"buffered",episode:a})}function sortedIndex(e,o){let t=0,n=e.length;for(;t<n;){let a=t+n>>>1;e[a]<o?t=a+1:n=a}return t}function addRowToShowEntryTable(e){let o=document.querySelector("#show-entry-table tbody"),t=[];for(const e of Array.from(o.rows)){let o=e.cells[0],n=parseInt(o.innerHTML);t.push(n)}let n=sortedIndex(t,e.episode),a=o.insertRow(n),d=a.insertCell(0),s=a.insertCell(1),i=a.insertCell(2);$(d).html(e.episode.toString()),$(s).html(e.current_state);let r=document.createElement("button");$(r).addClass("delete"),$(r).on("click",(function(){"buffered"!==e.current_state&&bufferShowEntryDeletion(e.show_id,e.id),entriesToAdd=entriesToAdd.filter((function(o){return o[1]!=e.episode})),this.parentNode.parentNode.remove()})),i.appendChild(r)}function addRowToShowWebhookTable(webhook){let table=document.querySelector("#show-webhook-table tbody"),row=table.insertRow(-1);$(row).addClass("has-text-centered"),$(row).data("webhook",webhook.base.base_id),$(row).data("show",webhook.show_id);let cell_basewh=row.insertCell(0),cell_t_downloading=row.insertCell(1),cell_t_downloaded=row.insertCell(2),cell_t_renamed=row.insertCell(3),cell_t_moved=row.insertCell(4),cell_t_completed=row.insertCell(5),cells=[cell_t_downloading,cell_t_downloaded,cell_t_renamed,cell_t_moved,cell_t_completed];for(const e of cells){$(e).addClass("is-vcentered");let o=document.createElement("input");$(o).attr("type","checkbox").appendTo($(e))}for(const trigger of all_triggers){let input=$(eval(`cell_t_${trigger}`)).find("input");$(input).attr("name",trigger),webhook.triggers.includes(trigger)&&input.prop("checked",!0)}let p=document.createElement("p");$(p).html(webhook.base.name),$(p).appendTo($(cell_basewh))}function bufferShowEntryDeletion(e,o){entriesToDelete.push([e,o])}function deleteShowEntry(e,o){let t=`/api/v1/shows/${e}/entries/${o}`;$.ajax({url:t,type:"DELETE"})}function addShowEntry(e,o,t){let n=`/api/v1/shows/${e}/entries`,a={episode:o,magnet:t};$.ajax({url:n,type:"POST",data:$.param(a),async:!1})}function deleteShowCache(e){let o=`/api/v1/shows/${e}/cache`;$.ajax({url:o,type:"DELETE",success:function(){window.location.reload()}})}function displayShowInfo(){$("#edit-control-tabs ul li").removeClass("is-active"),$("#show-info-tab").addClass("is-active"),$("#edit-show-form").removeClass("is-hidden"),$("#entry-tab-display").addClass("is-hidden"),$("#webhook-tab-display").addClass("is-hidden")}function displayShowEntries(){$("#edit-control-tabs ul li").removeClass("is-active"),$("#show-entry-tab").addClass("is-active"),$("#edit-show-form").addClass("is-hidden"),$("#entry-tab-display").removeClass("is-hidden"),$("#webhook-tab-display").addClass("is-hidden")}function displayShowWebhooks(){$("#edit-control-tabs ul li").removeClass("is-active"),$("#show-webhooks-tab").addClass("is-active"),$("#edit-show-form").addClass("is-hidden"),$("#entry-tab-display").addClass("is-hidden"),$("#webhook-tab-display").removeClass("is-hidden")}function openAddShowModal(){let e=$("#add-show-form");e.trigger("reset"),e.attr("action","/api/v1/shows"),e.attr("method","POST"),e.on("submit",submitAddOrEditShowForm),$(document.documentElement).addClass("is-clipped"),$("#add-show-modal").addClass("is-active")}function openEditShowModal(e){let o=$("#edit-show-form"),t=$("#add-show-entry-form"),n=$("#show-entry-table tbody"),a=$("#show-webhook-table tbody");displayShowInfo(),o.trigger("reset"),t.trigger("reset"),$("#edit-show-form :input").each((function(o,t){$(t).val(e[$(t).attr("name")])})),$("#fix-match-input").val(e.kitsu_id),n.empty(),a.empty();for(const o of e.entries)addRowToShowEntryTable(o);for(const o of e.webhooks)addRowToShowWebhookTable(o);$("#add-show-entry-form input[name='show_id']").val(e.id),o.attr("method","PUT"),o.attr("action",`/api/v1/shows/${e.id}`),o.on("submit",submitAddOrEditShowForm),t.on("submit",bufferShowEntryAddition),$("#del-cache-btn").on("click",(function(){deleteShowCache(e.id)})),$(document.documentElement).addClass("is-clipped"),$("#edit-show-modal").addClass("is-active")}function openDeleteShowModal(e){$("#delete-show-button").on("click",(function(o){o.preventDefault(),$.ajax({url:`/api/v1/shows/${e.id}`,type:"DELETE",success:function(){location.reload()}})})),$("#item-to-delete-name").text(e.title),$(document.documentElement).addClass("is-clipped"),$("#delete-show-modal").addClass("is-active")}function toggleFixMatchDropdown(){$("#fix-match-dropdown").toggleClass("is-active")}function closeModals(){modalsCanBeClosed&&(entriesToDelete=[],entriesToAdd=[],$(".modal").removeClass("is-active"),$("#add-show-entry-form input[name='episode']").removeClass("is-danger"),$("#add-show-entry-form p").addClass("is-hidden"),$(document.documentElement).removeClass("is-clipped"))}$((function(){$(".notification .delete").each((function(){$(this).on("click",(function(){$(this).parent().remove()}))})),$("#fix-match-input").change((function(){$("input[name='kitsu_id']").val($(this).val())})),$("#all-shows-link").on("click",(function(){$(".column.is-hidden").removeClass("is-hidden"),$("#back-to-top-link").removeClass("is-hidden"),$(this).remove()})),$("#back-to-top-link").on("click",(function(){$("html, body").animate({scrollTop:0},"slow")}))})),window.displayShowInfo=displayShowInfo,window.openAddShowModal=openAddShowModal,window.openEditShowModal=openEditShowModal,window.openDeleteShowModal=openDeleteShowModal,window.closeModals=closeModals,window.toggleFixMatchDropdown=toggleFixMatchDropdown,window.displayShowEntries=displayShowEntries,window.displayShowWebhooks=displayShowWebhooks}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var o=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(o,{a:o}),o},__webpack_require__.d=(e,o)=>{for(var t in o)__webpack_require__.o(o,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},__webpack_require__.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(561)})();